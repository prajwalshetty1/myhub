<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="MyHub - Personal Command Center">
  <title>My Hub - Personal Command Center</title>
  <link rel="stylesheet" href="hub.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1a1a2e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="My Hub">
  <script>
    // Inject API URL from environment (Vercel will replace this)
    window.VITE_API_URL = '{{VITE_API_URL}}' || (window.location.hostname === 'localhost' ? 'http://localhost:3000/api' : '/api');
  </script>
</head>
<body data-theme="cosmic">
  <!-- Starfield Background -->
  <div class="starfield" id="starfield"></div>
  <div class="nebula nebula-1"></div>
  <div class="nebula nebula-2"></div>
  <div class="moon"></div>

  <!-- Main Container -->
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">
          <span class="infinity-symbol">âˆ</span>
          <span>My Hub</span>
        </div>
      </div>
      <div class="header-actions">
        <button class="btn" id="themeToggle" title="Toggle Theme">ğŸŒ™</button>
        <button class="btn" id="shortcutsBtn" title="Keyboard Shortcuts">âŒ¨ï¸</button>
        <button class="btn" id="exportBtn" title="Export Data">ğŸ“¥</button>
        <button class="btn" id="importBtn" title="Import Data">ğŸ“¤</button>
        <button class="btn" id="activityLogBtn" title="Activity Log">ğŸ“Š</button>
        <button class="btn" id="controlCentreBtn" title="Control Centre">âš™ï¸</button>
      </div>
      <div class="clock-date">
        <div class="clock" id="clock">00:00:00</div>
        <div class="date-display">
          <span id="currentDate"></span> | <span id="ethiopianDate"></span>
        </div>
      </div>
    </header>

    <!-- Welcome Section -->
    <section class="welcome-section">
      <div class="diya-container">
        <div class="diya">
          <div class="diya-bowl"></div>
          <div class="diya-flame"></div>
        </div>
        <div>
          <h1 class="greeting" id="greeting">Good morning</h1>
          <p class="name-display">Prajwal</p>
        </div>
        <div class="diya">
          <div class="diya-bowl"></div>
          <div class="diya-flame"></div>
        </div>
      </div>
    </section>

    <!-- Daily Intention Widget -->
    <section class="intention-widget">
      <div class="intention-card">
        <div class="intention-header">
          <span class="intention-icon">ğŸŒ…</span>
          <h2>Morning Intention</h2>
        </div>
        <input 
          type="text" 
          class="intention-input" 
          id="morningIntention"
          placeholder="What do you want to accomplish today?"
        >
        <button class="btn btn-primary" id="sendMorningIntention">Send to Universe</button>
      </div>
      <div class="intention-card">
        <div class="intention-header">
          <span class="intention-icon">ğŸŒ™</span>
          <h2>Evening Gratitude</h2>
        </div>
        <input 
          type="text" 
          class="intention-input" 
          id="eveningGratitude"
          placeholder="What are you grateful for today?"
        >
        <button class="btn btn-primary" id="sendEveningGratitude">Send to Universe</button>
      </div>
    </section>

    <!-- Habit Tracker Widget -->
    <section class="habit-tracker-widget">
      <div class="widget-header">
        <h2 class="widget-title">Daily Habits</h2>
        <div class="streak-counter" id="habitStreak">ğŸ”¥ 0 day streak</div>
      </div>
      <div class="habit-list" id="habitList">
        <!-- Habits will be populated by JavaScript -->
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="habitProgress" style="width: 0%"></div>
      </div>
    </section>

    <!-- Module Cards Grid -->
    <section class="modules-grid">
      <a href="./modules/trading-planner/index.html" class="module-card">
        <div class="module-icon">ğŸ“ˆ</div>
        <h3 class="module-title">Trading Planner</h3>
        <p class="module-description">Futures & stocks journal</p>
        <div class="module-actions" onclick="event.stopPropagation();">
          <button class="btn btn-sm" onclick="event.stopPropagation(); event.preventDefault();">New Trade</button>
          <button class="btn btn-sm" onclick="event.stopPropagation(); event.preventDefault();">View Journal</button>
        </div>
      </a>

      <a href="./modules/journal/index.html" class="module-card">
        <div class="module-icon">ğŸ“–</div>
        <h3 class="module-title">Daily Journal</h3>
        <p class="module-description">Write your daily thoughts & reflections</p>
        <div class="module-actions" onclick="event.stopPropagation();">
          <button class="btn btn-sm" onclick="event.stopPropagation(); event.preventDefault();">Today's Entry</button>
        </div>
      </a>
    </section>
  </div>

  <!-- Quick Capture FAB -->
  <button class="quick-capture-fab" id="quickCaptureFab">+</button>
  <div class="quick-capture-menu" id="quickCaptureMenu">
    <div class="quick-capture-item" data-action="inbox">
      <span>ğŸ“¥</span>
      <span>Add to Inbox</span>
    </div>
    <div class="quick-capture-item" data-action="task">
      <span>âœ…</span>
      <span>Add Task</span>
    </div>
    <div class="quick-capture-item" data-action="idea">
      <span>ğŸ’¡</span>
      <span>Add Idea</span>
    </div>
    <div class="quick-capture-item" data-action="note">
      <span>ğŸ“</span>
      <span>Quick Note</span>
    </div>
  </div>

  <!-- Universe Overlay -->
  <div class="universe-overlay" id="universeOverlay">
    <div class="universe-message">Intention sent to the Universe! âœ¨</div>
  </div>

  <!-- Modals -->
  <!-- Shortcuts Modal -->
  <div class="modal-overlay" id="shortcutsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Keyboard Shortcuts</h2>
        <button class="modal-close" id="closeShortcutsModal">&times;</button>
      </div>
      <div id="shortcutsContent">
        <!-- Shortcuts will be populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Activity Log Modal -->
  <div class="modal-overlay" id="activityLogModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Activity Log</h2>
        <button class="modal-close" id="closeActivityLogModal">&times;</button>
      </div>
      <div id="activityLogContent">
        <!-- Activity log will be populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Control Centre Modal -->
  <div class="modal-overlay" id="controlCentreModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Control Centre</h2>
        <button class="modal-close" id="closeControlCentreModal">&times;</button>
      </div>
      <div id="controlCentreContent">
        <!-- Control centre content will be populated by JavaScript -->
      </div>
    </div>
  </div>

  <!-- Hidden file input for import -->
  <input type="file" id="importFileInput" accept=".json" style="display: none;">

  <!-- Scripts -->
  <script src="scripts/api-client.js"></script>
  <script src="hub.js"></script>
  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then((registration) => {
            console.log('SW registered:', registration);
          })
          .catch((error) => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>

